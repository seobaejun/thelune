<!DOCTYPE html>
<html class="no-js" lang="ko">

<head>
    <!-- Meta Tags -->
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="THE LUNE">

    <!-- Site Title -->
    <title>견적내기 - THE LUNE</title>
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://thelune.vercel.app/quote.html" />
    <meta property="og:title" content="견적내기 - THE LUNE" />
    <meta property="og:description" content="THE LUNE 프리미엄 리무진 견적을 받아보세요." />
    <meta property="og:image" content="https://thelune.vercel.app/assets/img/sns.jpg" />
    <meta property="og:site_name" content="THE LUNE" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://thelune.vercel.app/quote.html" />
    <meta name="twitter:title" content="견적내기 - THE LUNE" />
    <meta name="twitter:description" content="THE LUNE 프리미엄 리무진 견적을 받아보세요." />
    <meta name="twitter:image" content="https://thelune.vercel.app/assets/img/sns.jpg" />

    <!-- CSS Files -->
    <link rel="stylesheet" href="assets/css/plugins/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/plugins/fontawesome.min.css">
    <link rel="stylesheet" href="assets/css/plugins/swiper.min.css">
    <link rel="stylesheet" href="assets/css/plugins/aos.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/glass-button.css">
    <link rel="stylesheet" href="assets/css/quote.css">
    
    <style>
        /* 견적 페이지에서 일반 헤더 숨기기 */
        body.quote-page .ak-site_header {
            display: none !important;
        }
        
        html, body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
        
        /* CN모터스 스타일 레이아웃 */
        #estimate-page {
            background: #1a1a1a;
            height: 100vh;
            padding-top: 0;
            position: relative;
            width: 100%;
            overflow: hidden;
            margin: 0;
            padding-left: 0;
            padding-right: 0;
        }
        
        .estimate-hd {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 50px;
            background: #1a1a1a;
            border-bottom: 1px solid rgba(188, 184, 177, 0.2);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            width: 100%;
            box-sizing: border-box;
        }
        
        .estimate-hd h1 img {
            height: 40px;
        }
        
        .estimate-hd-r ul {
            display: flex;
            gap: 20px;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .estimate-hd-r a {
            color: #bcb8b1;
            text-decoration: none;
            font-size: 16px;
            font-weight: 600;
        }
        
        .estimate-hd-r a:hover {
            color: #ffffff;
        }
        
        /* 2-column 레이아웃: 왼쪽 이미지 크게, 오른쪽 옵션 패널 */
        .estimate-container {
            display: grid;
            grid-template-columns: 1fr 450px;
            gap: 20px;
            margin: 0;
            padding: 50px 20px 100px 30px;
            align-items: start;
            width: 100%;
            box-sizing: border-box;
            position: relative;
            z-index: 1;
        }
        
        /* 왼쪽: 이미지 영역 (크게, 고정) */
        .estimate-img {
            position: sticky;
            top: 0;
            width: 100%;
            display: block;
            height: fit-content;
        }
        
        .estimate-img-item {
            background: #2a2a2a;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            width: 100%;
            height: calc(100vh - 70px);
            min-height: 600px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .estimate-img-item img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            object-position: center;
            display: block;
        }
        
        /* 오른쪽: 옵션 선택 패널 (스크롤 가능) */
        .estimate-info {
            background: #ffffff;
            border-radius: 10px;
            padding: 40px 30px 0 30px !important;
            padding-top: 40px !important;
            display: flex !important;
            flex-direction: column !important;
            position: relative !important;
            top: 0;
            z-index: 1;
            height: calc(100vh - 50px) !important;
            max-height: calc(100vh - 50px) !important;
            box-sizing: border-box;
            overflow: hidden !important;
        }
        
        .estimate-info-content {
            overflow-y: auto !important;
            overflow-x: hidden;
            padding-bottom: 150px !important;
            padding-right: 0;
            padding-left: 0;
            margin-right: 0;
            box-sizing: border-box;
            flex: 1 1 auto !important;
            min-height: 0 !important;
            max-height: none !important;
        }
        
        .estimate-info-content > * {
            padding-right: 30px;
        }
        
        .estimate-info-content::-webkit-scrollbar {
            width: 6px;
        }
        
        .estimate-info-content::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .estimate-info-content::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        
        .estimate-info-content::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        
        .estimate-info-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            margin-top: 0;
            padding-top: 10px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(188, 184, 177, 0.2);
        }
        
        .estimate-info-top h2 {
            font-size: 20px;
            font-weight: 600;
            color: #1a1a1a;
            margin: 0;
        }
        
        .btn-wrap {
            display: flex;
            align-items: center;
        }
        
        .btn-wrap button {
            background: #ffffff;
            border: 1px solid rgba(0,0,0,0.2);
            border-radius: 5px;
            padding: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            width: 36px;
            height: 36px;
            color: #1a1a1a;
        }
        
        .btn-wrap button:hover {
            background: rgba(0,0,0,0.05);
            border-color: rgba(0,0,0,0.4);
        }
        
        .btn-wrap button svg {
            width: 20px;
            height: 20px;
            display: block;
            stroke: #1a1a1a;
            fill: none;
        }
        
        .btn-wrap button:hover svg {
            stroke: #000000;
        }
        
        .btn-wrap button img {
            width: 20px;
            height: 20px;
            display: block;
        }
        
        .estimate-info-con {
            margin-top: 15px;
            padding-top: 0;
        }
        
        .prog-wrap {
            margin-bottom: 30px;
        }
        
        .prog-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .prog-info h3 {
            font-size: 20px;
            font-weight: 600;
            color: #1a1a1a;
            margin: 0;
        }
        
        .prog-info p {
            color: rgba(0,0,0,0.6);
            font-size: 14px;
            margin: 0;
        }
        
        .prog-bar ul {
            display: flex;
            justify-content: space-between;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 10px;
        }
        
        .prog-bar li {
            flex: 1;
            height: 4px;
            background: rgba(0,0,0,0.1);
            border-radius: 2px;
        }
        
        .prog-bar li.active {
            background: #1a1a1a;
        }
        
        /* 옵션 박스 */
        .optbx {
            margin-bottom: 30px;
        }
        
        /* 컬러 선택 섹션 하단 여백 추가 */
        .optbx.opt-color {
            margin-bottom: 120px;
        }
        
        .optbx-top {
            margin-bottom: 20px;
        }
        
        .optbx-top h4 {
            font-size: 18px;
            font-weight: 600;
            color: #1a1a1a;
            margin: 0;
        }
        
        .optbx-con {
            /* 옵션 내용 */
        }
        
        /* 트림 섹션 */
        .trim-bx {
            display: flex;
            margin-bottom: 20px;
        }
        
        .trim-bx .con-flex {
            display: flex;
            width: 100%;
            gap: 20px;
        }
        
        .opt-label {
            color: rgba(0,0,0,0.8);
            font-size: 14px;
            font-weight: 500;
            min-width: 60px;
            padding-top: 12px;
        }
        
        .opt-data {
            flex: 1;
        }
        
        .btn-lst ul {
            display: flex;
            gap: 8px;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .opt-chk-item {
            flex: 1;
        }
        
        .opt-chk-item input[type="radio"] {
            display: none;
        }
        
        .opt-chk-item label {
            display: flex;
            align-items: center;
            padding: 12px;
            background: #f5f5f5;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #1a1a1a;
            font-size: 14px;
            justify-content: flex-start;
        }
        
        .opt-chk-item input[type="radio"]:checked + label {
            background: #1a1a1a;
            border-color: #1a1a1a;
            color: #ffffff;
        }
        
        .opt-chk-item label:hover {
            border-color: #1a1a1a;
        }
        
        /* 컬러 선택 */
        .color-bx {
            margin-bottom: 30px;
        }
        
        .con-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .opt-tit {
            color: rgba(0,0,0,0.8);
            font-size: 14px;
            font-weight: 500;
        }
        
        .clchart ul {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .clchart .opt-chk-item {
            width: 100%;
        }
        
        /* 체크박스 input 완전히 숨기기 */
        .clchart .opt-chk-item input[type="checkbox"],
        .clchart .opt-chk-item input[type="radio"] {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            position: absolute !important;
            width: 0 !important;
            height: 0 !important;
        }
        
        .clchart .opt-chk-item label {
            display: flex;
            align-items: center;
            gap: 12px;
            background: #f5f5f5;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 5px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        /* 컨버전 옵션 상세 설명 스타일 */
        .opt-conversion .option-text {
            display: flex;
            flex-direction: column;
            gap: 4px;
            flex: 1;
            min-width: 0;
        }
        .opt-conversion .option-name {
            font-weight: 600;
            font-size: 14px;
            color: #1a1a1a;
        }
        .opt-conversion .option-desc {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
        }
        
        /* 추가 옵션 스타일 */
        .opt-additional .option-text {
            display: flex;
            flex-direction: column;
            gap: 4px;
            flex: 1;
            min-width: 0;
        }
        .opt-additional .option-name {
            font-weight: 600;
            font-size: 14px;
            color: #1a1a1a;
        }
        .opt-additional .option-price {
            font-size: 14px;
            font-weight: 600;
            color: #1a1a1a;
        }
        .opt-additional .option-image {
            flex-shrink: 0;
            width: 80px;
            height: 60px;
            object-fit: cover;
            border-radius: 4px;
            order: 2;
        }
        .opt-additional .option-text {
            order: 3;
        }
        .opt-additional .clchart .opt-chk-item label {
            padding-left: 50px;
        }
        .opt-conversion .opt-chk-item input[type="checkbox"]:checked + label .option-name,
        .opt-conversion .opt-chk-item input[type="checkbox"]:checked + label .option-desc {
            color: #1a1a1a;
        }
        /* 컨버전 옵션 체크되었을 때 배경색 변경하지 않음 (텍스트가 보이도록) */
        .opt-conversion .opt-chk-item input[type="checkbox"]:checked + label {
            background: #f5f5f5;
            border-color: #1a1a1a;
        }
        /* 컨버전 옵션 label 패딩 조정 (체크 표시 공간 확보) */
        .opt-conversion .clchart .opt-chk-item label {
            padding-left: 50px;
        }
        .opt-conversion .option-image {
            flex-shrink: 0;
            width: 80px;
            height: 60px;
            object-fit: cover;
            border-radius: 4px;
            order: 2;
        }
        .opt-conversion .option-text {
            order: 3;
        }
        
        .clchart .opt-chk-item label::before {
            content: '';
            width: 20px;
            height: 20px;
            border: 2px solid rgba(0,0,0,0.5);
            border-radius: 3px;
            flex-shrink: 0;
            background: #ffffff;
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            transition: all 0.3s ease;
            order: 1;
            z-index: 2;
        }
        
        /* 3페이지 컨버전 옵션 선택의 라디오 버튼 테두리 더 진하게 */
        .opt-conversion .clchart .opt-chk-item label::before {
            border: 2px solid rgba(0,0,0,0.6);
        }
        
        
        /* 순정 옵션의 경우 체크박스를 label 안에 배치 */
        .opt-standard .clchart .opt-chk-item label {
            padding-left: 50px;
        }
        
        .clchart .opt-chk-item input[type="radio"]:checked + label::before {
            background: #1a1a1a;
            border-color: #1a1a1a;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M2 6l3 3 5-5'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: center;
            background-size: 12px 12px;
        }
        
        .clchart .opt-chk-item label::after {
            content: '';
            width: 30px;
            height: 30px;
            border-radius: 3px;
            flex-shrink: 0;
            background: var(--color-bg, #e0e0e0);
            position: relative;
            order: 2;
            margin-left: 12px;
        }
        
        .clchart .opt-chk-item label span {
            order: 3;
        }
        
        /* 컬러 선택의 경우 체크박스와 색상 스와치가 겹치지 않도록 */
        .opt-color .clchart .opt-chk-item label {
            padding-left: 50px;
        }
        
        .clchart .opt-chk-item input[type="radio"]:checked + label {
            border: 2px solid #1a1a1a;
            background: #f5f5f5;
            color: #1a1a1a;
        }
        
        .clchart .opt-chk-item input[type="checkbox"]:checked + label::before {
            background: #1a1a1a;
            border-color: #1a1a1a;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M2 6l3 3 5-5'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: center;
            background-size: 12px 12px;
        }
        
        .clchart .opt-chk-item input[type="checkbox"]:checked + label {
            border: 2px solid #1a1a1a;
            background: #f5f5f5 !important;
            color: #1a1a1a;
        }
        
        /* 순정 옵션 체크 시에도 배경색 유지 */
        .opt-standard .clchart .opt-chk-item input[type="checkbox"]:checked + label {
            background: #f5f5f5 !important;
            border: 1px solid rgba(0,0,0,0.1) !important;
        }
        
        /* 순정 옵션용 스타일 (색상 스와치 없이) */
        .clchart .opt-chk-item input[type="checkbox"] + label::after {
            display: none;
        }
        
        .clchart .opt-chk-item label span {
            color: inherit;
        }
        
        /* 순정 옵션 이미지 스타일 */
        .clchart .opt-chk-item input[type="checkbox"] + label .option-image {
            width: 100px;
            height: 100px;
            border-radius: 5px;
            flex-shrink: 0;
            background: #e0e0e0;
            object-fit: cover;
            order: 2;
            cursor: pointer;
        }
        
        .clchart .opt-chk-item input[type="checkbox"] + label span {
            order: 3;
        }
        
        /* 기본옵션, 앰블럼, 루프타입 */
        .with-chk-lst {
            display: flex !important;
            flex-direction: column !important;
            gap: 8px !important;
        }
        
        .with-chk-lst .lst-item {
            display: flex !important;
            align-items: flex-start;
            margin-bottom: 8px !important;
        }
        
        .with-chk-lst .lst-item:last-child {
            margin-bottom: 0 !important;
        }
        
        .lst-item {
            display: flex;
            align-items: flex-start;
        }
        
        .lst-item input[type="checkbox"],
        .lst-item input[type="radio"] {
            display: none;
        }
        
        .lst-item label {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            width: 100%;
            padding: 15px;
            padding-left: 40px;
            background: #f5f5f5;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            gap: 12px;
            position: relative;
        }
        
        .lst-item label::before {
            content: '';
            width: 20px;
            height: 20px;
            border: 2px solid rgba(0,0,0,0.3);
            border-radius: 3px;
            flex-shrink: 0;
            background: #ffffff;
            position: absolute;
            left: 15px;
            top: 15px;
            z-index: 2;
            transition: all 0.3s ease;
            pointer-events: none;
        }
        
        .lst-item input[type="radio"] + label::before {
            border-radius: 50%;
        }
        
        .lst-item input[type="checkbox"]:checked + label::before,
        .lst-item input[type="checkbox"][checked] + label::before,
        .lst-item input[type="checkbox"][checked="checked"] + label::before {
            background: #1a1a1a !important;
            border-color: #1a1a1a !important;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M2 6l3 3 5-5'/%3E%3C/svg%3E") !important;
            background-repeat: no-repeat !important;
            background-position: center !important;
            background-size: 12px 12px !important;
        }
        
        .lst-item input[type="checkbox"]:checked + label,
        .lst-item input[type="checkbox"][checked] + label,
        .lst-item input[type="checkbox"][checked="checked"] + label,
        .lst-item input[type="radio"]:checked + label,
        .lst-item input[type="radio"][checked] + label,
        .lst-item input[type="radio"][checked="checked"] + label {
            background: #f5f5f5 !important;
            border-color: #1a1a1a !important;
            border-width: 2px !important;
        }
        
        .lst-item input[type="radio"]:checked + label::before,
        .lst-item input[type="radio"][checked] + label::before,
        .lst-item input[type="radio"][checked="checked"] + label::before {
            background: #1a1a1a !important;
            border-color: #1a1a1a !important;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3E%3Ccircle cx='4' cy='4' r='3' fill='%23ffffff'/%3E%3C/svg%3E") !important;
            background-repeat: no-repeat !important;
            background-position: center !important;
            background-size: 8px 8px !important;
            border-radius: 50% !important;
        }
        
        /* 순정 옵션과 컨버전 옵션 강제 체크 스타일 */
        #standard_style:checked + label::before,
        #standard_drive_wise:checked + label::before,
        #standard_monitoring:checked + label::before,
        #standard_smart_connect:checked + label::before,
        #standard_hud:checked + label::before,
        #standard_boss:checked + label::before,
        #standard_comfort:checked + label::before,
        #conversion_roof:checked + label::before,
        #conversion_mood:checked + label::before,
        #conversion_tv:checked + label::before,
        #conversion_soundproof:checked + label::before {
            background: #1a1a1a !important;
            border-color: #1a1a1a !important;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M2 6l3 3 5-5'/%3E%3C/svg%3E") !important;
            background-repeat: no-repeat !important;
            background-position: center !important;
            background-size: 12px 12px !important;
        }
        
        #standard_style:checked + label,
        #standard_drive_wise:checked + label,
        #standard_monitoring:checked + label,
        #standard_smart_connect:checked + label,
        #standard_hud:checked + label,
        #standard_boss:checked + label,
        #standard_comfort:checked + label,
        #conversion_roof:checked + label,
        #conversion_mood:checked + label,
        #conversion_tv:checked + label,
        #conversion_soundproof:checked + label,
        .lst-item label.checked {
            background: #f5f5f5 !important;
            border-color: #1a1a1a !important;
            border-width: 2px !important;
        }
        
        .lst-item label.checked::before {
            background: #1a1a1a !important;
            border-color: #1a1a1a !important;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M2 6l3 3 5-5'/%3E%3C/svg%3E") !important;
            background-repeat: no-repeat !important;
            background-position: center !important;
            background-size: 12px 12px !important;
        }
        
        .lst-item input[type="checkbox"]:checked + label .lst-txt h5,
        .lst-item input[type="checkbox"]:checked + label .lst-txt p,
        .lst-item input[type="checkbox"]:checked + label .lst-price {
            color: #1a1a1a;
        }
        
        .lst-item .lst-thumb {
            margin-left: 0;
        }
        
        .lst-thumb {
            width: 80px;
            height: 80px;
            flex-shrink: 0;
            border-radius: 5px;
            overflow: hidden;
            background: #e0e0e0;
        }
        
        .lst-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .lst-txt {
            flex: 1;
        }
        
        .lst-txt h5 {
            font-size: 16px;
            font-weight: 600;
            color: #1a1a1a;
            margin: 0 0 8px 0;
        }
        
        .lst-txt p {
            font-size: 14px;
            color: rgba(0,0,0,0.7);
            margin: 0;
            line-height: 1.5;
        }
        
        .lst-price {
            color: #1a1a1a;
            font-size: 14px;
            font-weight: 600;
            margin-left: 15px;
        }
        
        /* 하단 고정 영역: 예상 견적 금액 + 버튼들 (CN모터스 스타일) */
        .estimate-price-section {
            position: absolute !important;
            bottom: 80px !important;
            left: 0 !important;
            right: 0 !important;
            background: #ffffff !important;
            border-top: 1px solid rgba(188, 184, 177, 0.2) !important;
            padding: 20px 30px !important;
            z-index: 200 !important;
            flex-shrink: 0 !important;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1) !important;
            width: 100% !important;
            box-sizing: border-box !important;
            display: flex !important;
            flex-direction: column !important;
            visibility: visible !important;
            opacity: 1 !important;
            pointer-events: auto !important;
            border-radius: 10px 10px 0 0 !important;
        }
        
        .estimate-price-row {
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            margin-bottom: 15px !important;
        }
        
        .estimate-price-title {
            font-size: 16px !important;
            font-weight: 600 !important;
            color: #1a1a1a !important;
        }
        
        .estimate-price-value {
            font-size: 24px !important;
            font-weight: 700 !important;
            color: #1a1a1a !important;
        }
        
        .estimate-sidebar-btns {
            display: flex !important;
            gap: 10px !important;
        }
        
        .estimate-sidebar-btns a {
            flex: 1;
            padding: 12px 20px;
            background: #1a1a1a;
            color: #ffffff;
            text-decoration: none;
            border-radius: 5px;
            font-size: 14px;
            font-weight: 600;
            border: 1px solid #1a1a1a;
            transition: all 0.3s ease;
            white-space: nowrap;
            text-align: center;
            cursor: pointer;
            pointer-events: auto;
            display: block;
        }
        
        .estimate-sidebar-btns a:hover {
            background: #333;
            border-color: #333;
        }
        
        .estimate-sidebar-btns a:last-child {
            background: transparent;
            color: #1a1a1a;
            border-color: #1a1a1a;
        }
        
        .estimate-sidebar-btns a:last-child:hover {
            background: #1a1a1a;
            color: #ffffff;
        }
        
        /* 반응형 */
        @media (max-width: 1400px) {
            .estimate-container {
                grid-template-columns: 1fr 450px;
                gap: 30px;
                padding: 30px 40px;
            }
        }
        
        @media (max-width: 1200px) {
            .estimate-container {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .estimate-img {
                position: relative;
                top: 0;
            }
        }
        
        /* 노트북 화면에서 로고와 메뉴 겹침 방지 */
        @media (min-width: 1024px) and (max-width: 1920px) {
            .ak-main-header-left {
                min-width: 120px !important;
                max-width: 150px !important;
                flex-shrink: 0 !important;
                margin-right: 50px !important;
            }
            
            .ak-site_branding.lune-logo img {
                width: 120px !important;
                height: 60px !important;
                max-width: 120px !important;
                max-height: 60px !important;
                object-fit: contain !important;
            }
            
            .ak-main-header-center {
                min-width: 0 !important;
                margin-left: 0 !important;
                flex: 1 !important;
                padding-left: 15px !important;
            }
            
            .ak-nav_list {
                gap: 4px !important;
            }
            
            .ak-nav_list li a {
                font-size: 11px !important;
                padding: 6px 1px !important;
            }
            
            .ak-main-header-right {
                min-width: 200px !important;
                flex-shrink: 0 !important;
                gap: 10px !important;
            }
            
            .ak-header_btns {
                gap: 10px !important;
            }
            
            .ak-header_btns a {
                padding: 5px 12px !important;
                font-size: 12px !important;
            }
            
            .language-selector {
                gap: 1px !important;
            }
            
            .lang-btn {
                font-size: 11px !important;
                padding: 1px 2px !important;
            }
        }

</style>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/img/favicon.svg">
</head>

<body class="quote-page">

            <!-- Start Header Section -->
    <header class="ak-site_header ak-style1 ak-sticky_header">
        <div class="ak-main_header">
            <div style="width: 100%; padding: 0 50px;">
                <div class="ak-main_header_in" style="display: flex !important; justify-content: space-between !important; align-items: center !important; width: 100% !important;">
                    <div class="ak-main-header-left">
                        <a class="ak-site_branding lune-logo" href="index.html">
                            <img src="assets/img/logo.png" alt="THE LUNE">
                        </a>
                    </div>
                    <div class="ak-main-header-center" style="flex: 1 !important; display: flex !important; justify-content: center !important;">
                        <div class="ak-nav ak-medium">
                            <ul class="ak-nav_list" style="display: flex !important; align-items: center !important; gap: 20px !important; padding: 0 !important; white-space: nowrap !important; overflow: visible !important; justify-content: center !important; flex-wrap: nowrap !important;">
                                <li><a href="about.html" class="text-hover-animaiton" style="font-size: 14px !important; color: #ffffff !important;">회사소개</a></li>
                                <li class="menu-item-has-children">
                                    <a href="services.html" class="text-hover-animaiton" style="font-size: 14px !important; color: #ffffff !important;">모델소개</a>
                                    <ul>
                                        <li><a href="lune-carnival-9.html" class="text-hover-animaiton" style="text-transform: none !important;">Carnival TL9</a></li>
                                        <li><a href="lune-carnival-7.html" class="text-hover-animaiton" style="text-transform: none !important;">Carnival TLV9</a></li>
                                        <li><a href="lune-carnival-4.html" class="text-hover-animaiton" style="text-transform: none !important;">Carnival TLV4</a></li>
                                        <li><a href="sprinter.html" class="text-hover-animaiton" style="text-transform: none !important;">Benz Sprinter</a></li>
                                    </ul>
                                </li>
                                <li><a href="gallery.html" class="text-hover-animaiton" style="font-size: 14px !important; color: #ffffff !important;">갤러리</a></li>
                                <li><a href="news.html" class="text-hover-animaiton" style="font-size: 14px !important; color: #ffffff !important;">홍보센터</a></li>
                                <li><a href="showroom.html" class="text-hover-animaiton" style="font-size: 14px !important; color: #ffffff !important;">전시장</a></li>
                                <li><a href="test-drive.html" class="text-hover-animaiton" style="font-size: 14px !important; color: #ffffff !important;">찾아가는 시승 서비스</a></li>
                                <li><a href="quote.html" class="text-hover-animaiton" style="font-size: 14px !important; color: #ffffff !important;">견적내기</a></li>
                                <li class="mobile-menu-item"><a href="contact.html" class="text-hover-animaiton" style="font-size: 14px !important; color: #ffffff !important;">문의하기</a></li>
                                <li class="mobile-menu-item"><a href="as.html" class="text-hover-animaiton" style="font-size: 14px !important; color: #ffffff !important;">A/S접수</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="ak-main-header-right" style="display: flex !important; align-items: center !important; gap: 20px !important;">
                        <div class="ak-header_btns" style="display: flex !important; align-items: center !important; gap: 20px !important;">
                            <a href="contact.html" style="display: inline-block; padding: 8px 20px; border: 1px solid rgba(188, 184, 177, 0.5); border-radius: 4px; color: #ffffff !important; text-decoration: none !important; font-size: 15px !important; transition: all 0.3s ease;">
                                문의하기
                            </a>
                            <a href="as.html" style="display: inline-block; padding: 8px 20px; border: none; color: #ffffff !important; text-decoration: none !important; font-size: 15px !important; transition: all 0.3s ease;">A/S접수</a>
                            <div class="language-selector" style="display: flex !important; align-items: center !important; gap: 3px !important; color: white !important; font-size: 14px !important;">
                                <button class="lang-btn active" onclick="switchLanguage('ko')" style="background: none !important; border: none !important; color: #bcb8b1 !important; cursor: pointer !important; padding: 2px 4px !important; font-size: 14px !important; font-weight: 600 !important;">KOR</button>
                                <span style="color: white !important; margin: 0 2px !important;">/</span>
                                <button class="lang-btn" onclick="switchLanguage('en')" style="background: none !important; border: none !important; color: white !important; cursor: pointer !important; padding: 2px 4px !important; font-size: 14px !important;">ENG</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="nav-bar-border"></div>
    </header>
    <!-- End Header Section -->

    <!-- Start Quote Page (CN모터스 스타일) -->
    <div id="estimate-page">
        <!-- CN모터스 스타일 헤더 -->
        <div class="estimate-hd">
            <h1><a href="index.html"><img src="assets/img/logo.png" alt="THE LUNE"></a></h1>
            <div class="estimate-hd-r">
                <ul>
                    <li><a href="contact.html">구매 상담하기</a></li>
                    <li><a href="index.html">견적내기 종료</a></li>
                </ul>
            </div>
        </div>

        <!-- 2-column 레이아웃: 왼쪽 이미지 크게, 오른쪽 옵션 패널 -->
        <div class="estimate-container">
            <!-- 왼쪽: 이미지 영역 (크게, 고정) -->
            <div class="estimate-img">
                <div class="estimate-img-item">
                    <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="THE LUNE 카니발" id="mainCarImage">
                </div>
            </div>
                
            <!-- 오른쪽: 옵션 선택 패널 (CN모터스 스타일) -->
            <div class="estimate-info">
                <div class="estimate-info-content">
                    <div class="estimate-info-top">
                        <h2>THE LUNE 카니발</h2>
                        <div class="btn-wrap pc-only">
                            <button id="resetQuoteBtn" type="button" title="초기화">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1 4V10H7" stroke="#1a1a1a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M23 20V14H17" stroke="#1a1a1a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10M23 14L18.36 18.36A9 9 0 0 1 3.51 15" stroke="#1a1a1a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div class="estimate-info-con">
                        <!-- 진행 단계 표시 -->
                        <div class="prog-wrap" data-step="4">
                            <div class="prog-info">
                                <h3 id="currentStepTitle">모델/사양</h3>
                                <p id="currentStepProgress">1/4</p>
                            </div>
                            <div class="prog-bar">
                                <ul>
                                    <li class="active" data-step-index="0"></li>
                                    <li data-step-index="1"></li>
                                    <li data-step-index="2"></li>
                                    <li data-step-index="3"></li>
                                </ul>
                            </div>
                        </div>

                        <!-- 옵션 래퍼 -->
                        <div class="opt-wrap" data-category="model_spec" data-step="model-spec" style="display: block;">
                            <form id="quoteForm">
                                <!-- 트림 -->
                                <div class="optbx opt-trim">
                                    <div class="optbx-top">
                                        <h4>트림</h4>
                                    </div>
                                    <div class="optbx-con">
                                        <!-- 모델 -->
                                        <div class="trim-bx con-flex" data-opt="model_type" data-group="모델" data-choice-min="1" data-choice-limit="1" style="display: block;">
                                            <div class="con-flex">
                                                <div class="opt-label">모델</div>
                                                <div class="opt-data trim-data btn-lst">
                                                    <ul class="con-flex">
                                                        <li class="opt-chk-item top" data-type="C">
                                                            <input type="radio" name="model_type" id="model_tl9" value="TL9" data-price="0">
                                                            <label for="model_tl9"><span>TL9</span></label>
                                                        </li>
                                                        <li class="opt-chk-item top" data-type="C">
                                                            <input type="radio" name="model_type" id="model_tlv9" value="TLV9" data-price="0">
                                                            <label for="model_tlv9"><span>TLV9</span></label>
                                                        </li>
                                                        <li class="opt-chk-item top" data-type="C">
                                                            <input type="radio" name="model_type" id="model_tlv4" value="TLV4" data-price="0">
                                                            <label for="model_tlv4"><span>TLV4</span></label>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- 등급 -->
                                        <div class="trim-bx con-flex" data-opt="trim_level" data-group="등급" data-choice-min="1" data-choice-limit="1" style="display: block;">
                                            <div class="con-flex">
                                                <div class="opt-label">등급</div>
                                                <div class="opt-data trim-data btn-lst">
                                                    <ul class="con-flex">
                                                        <li class="opt-chk-item top" data-type="C">
                                                            <input type="radio" name="trim_level" id="trim_level_signature" value="시그니처" data-price="51160000">
                                                            <label for="trim_level_signature"><span>시그니처</span></label>
                                                        </li>
                                                        <li class="opt-chk-item top" data-type="C">
                                                            <input type="radio" name="trim_level" id="trim_level_xline" value="X-LINE" data-price="51220000">
                                                            <label for="trim_level_xline"><span>X-LINE</span></label>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- 엔진 -->
                                        <div class="trim-bx con-flex" data-opt="trim_engine" data-group="엔진" data-choice-min="1" data-choice-limit="1" style="display: block;">
                                            <div class="con-flex">
                                                <div class="opt-label">엔진</div>
                                                <div class="opt-data trim-data btn-lst">
                                                    <ul class="con-flex">
                                                        <li class="opt-chk-item top" data-type="C">
                                                            <input type="radio" name="trim_engine" id="engine_gasoline" value="가솔린" data-price="0">
                                                            <label for="engine_gasoline"><span>가솔린</span></label>
                                                        </li>
                                                        <li class="opt-chk-item top" data-type="C">
                                                            <input type="radio" name="trim_engine" id="engine_hybrid" value="하이브리드" data-price="4550000">
                                                            <label for="engine_hybrid"><span>하이브리드</span></label>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 순정 옵션 -->
                                <div class="optbx opt-standard">
                                    <div class="optbx-top" style="display: flex; justify-content: space-between; align-items: center;">
                                        <h4>순정 옵션</h4>
                                        <span style="color: rgba(0,0,0,0.6); font-size: 14px; font-weight: 500;">기본포함</span>
                                    </div>
                                    <div class="optbx-con">
                                        <div class="opt-data clchart top btn-lst" data-opt="standard_option" data-group="순정옵션" data-choice-min="0" data-choice-limit="100" style="display: block;">
                                            <ul class="con-flex" style="flex-direction: column; gap: 8px;">
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="standard_style" id="standard_style" value="스타일" data-price="0" data-image="assets/img/10월 29일 the lune 카니발7409.jpg" checked>
                                                    <label for="standard_style">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="스타일" class="option-image">
                                                        <span>스타일</span>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="standard_drive_wise" id="standard_drive_wise" value="드라이브 와이즈" data-price="0" data-image="assets/img/10월 29일 the lune 카니발7409.jpg" checked>
                                                    <label for="standard_drive_wise">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="드라이브 와이즈" class="option-image">
                                                        <span>드라이브 와이즈</span>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="standard_monitoring" id="standard_monitoring" value="모니터링 팩" data-price="0" data-image="assets/img/10월 29일 the lune 카니발7409.jpg" checked>
                                                    <label for="standard_monitoring">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="모니터링 팩" class="option-image">
                                                        <span>모니터링 팩</span>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="standard_smart_connect" id="standard_smart_connect" value="스마트 커넥트" data-price="0" data-image="assets/img/10월 29일 the lune 카니발7409.jpg" checked>
                                                    <label for="standard_smart_connect">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="스마트 커넥트" class="option-image">
                                                        <span>스마트 커넥트</span>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="standard_hud" id="standard_hud" value="HUD+빌트인 캠2" data-price="0" data-image="assets/img/10월 29일 the lune 카니발7409.jpg" checked>
                                                    <label for="standard_hud">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="HUD+빌트인 캠2" class="option-image">
                                                        <span>HUD+빌트인 캠2</span>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="standard_boss" id="standard_boss" value="BOSS 사운드" data-price="0" data-image="assets/img/10월 29일 the lune 카니발7409.jpg" checked>
                                                    <label for="standard_boss">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="BOSS 사운드" class="option-image">
                                                        <span>BOSS 사운드</span>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="standard_comfort" id="standard_comfort" value="컴포트" data-price="0" data-image="assets/img/10월 29일 the lune 카니발7409.jpg" checked>
                                                    <label for="standard_comfort">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="컴포트" class="option-image">
                                                        <span>컴포트</span>
                                                    </label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- 컬러 선택 -->
                                <div class="optbx opt-color">
                                    <div class="optbx-top">
                                        <h4>컬러 선택</h4>
                                    </div>
                                    <div class="optbx-con">
                                        <!-- 외장 -->
                                        <div class="color-bx" data-opt="color_ext" data-group="차량색상" data-choice-min="1" data-choice-limit="1" style="display: block;">
                                            <div class="con-top con-flex-bet">
                                                <div class="opt-tit">외장</div>
                                                <div class="color-value"></div>
                                            </div>
                                            <div class="opt-data clchart top btn-lst">
                                                <ul class="con-flex">
                                                    <li class="opt-chk-item top" data-type="B">
                                                        <input type="radio" name="color_ext" id="color_aurora_black_pearl" value="오로라 블랙 펄" data-price="0">
                                                        <label for="color_aurora_black_pearl" style="--color-bg: #1a1a1a;"><span>오로라 블랙 펄</span></label>
                                                    </li>
                                                    <li class="opt-chk-item top" data-type="B">
                                                        <input type="radio" name="color_ext" id="color_snow_white_pearl" value="스노우 화이트 펄" data-price="0">
                                                        <label for="color_snow_white_pearl" style="--color-bg: #ffffff; border: 1px solid rgba(0,0,0,0.1);"><span>스노우 화이트 펄</span></label>
                                                    </li>
                                                    <li class="opt-chk-item top" data-type="B">
                                                        <input type="radio" name="color_ext" id="color_ceramic_silver" value="세라믹 실버 (X-LINE)" data-price="0">
                                                        <label for="color_ceramic_silver" style="--color-bg: #d7d6c4;"><span>세라믹 실버 (X-LINE)</span></label>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>

                                        <!-- 시트 색상 -->
                                        <div class="color-bx" data-opt="color_seat" data-group="시트색상" data-choice-min="1" data-choice-limit="1" style="display: block;">
                                            <div class="con-top con-flex-bet">
                                                <div class="opt-tit">시트 색상</div>
                                                <div class="color-value"></div>
                                            </div>
                                            <div class="opt-data clchart top btn-lst">
                                                <ul class="con-flex">
                                                    <li class="opt-chk-item top" data-type="B">
                                                        <input type="radio" name="color_seat" id="color_seat_top" value="토프 인테리어" data-price="0">
                                                        <label for="color_seat_top" style="--color-bg: #d4c5b9;"><span>토프 인테리어</span></label>
                                                    </li>
                                                    <li class="opt-chk-item top" data-type="B">
                                                        <input type="radio" name="color_seat" id="color_seat_cotton" value="코튼 베이지" data-price="0">
                                                        <label for="color_seat_cotton" style="--color-bg: #e8dcc4;"><span>코튼 베이지</span></label>
                                                    </li>
                                                    <li class="opt-chk-item top" data-type="B">
                                                        <input type="radio" name="color_seat" id="color_seat_navy" value="네이비 그레이 (HEV전용)" data-price="0">
                                                        <label for="color_seat_navy" style="--color-bg: #4a5568;"><span>네이비 그레이 (HEV전용)</span></label>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        
                        <!-- 컨버전 옵션 섹션 -->
                        <div class="opt-wrap" data-category="conversion" data-step="conversion" style="display: none;">
                            <form id="quoteConversionForm">
                                <div class="optbx opt-conversion">
                                    <div class="optbx-top" style="display: flex; justify-content: space-between; align-items: center;">
                                        <h4>기본 컨버전 옵션</h4>
                                        <span style="color: rgba(0,0,0,0.6); font-size: 14px; font-weight: 500;">기본포함</span>
                                    </div>
                                    <div class="optbx-con">
                                        <div class="opt-data clchart top btn-lst" data-opt="conversion_option" data-group="컨버전옵션" data-choice-min="0" data-choice-limit="100" style="display: block;">
                                            <ul class="con-flex" style="flex-direction: column; gap: 8px;">
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="conversion_roof" id="conversion_roof" value="루프" data-price="0" data-image="assets/img/10월 29일 the lune 카니발7409.jpg" checked>
                                                    <label for="conversion_roof">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="루프" class="option-image">
                                                        <div class="option-text">
                                                            <span class="option-name">루프</span>
                                                            <span class="option-desc">카니발 전용 Hi-Roof</span>
                                                        </div>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="conversion_mood" id="conversion_mood" value="무드등" data-price="0" data-image="assets/img/10월 29일 the lune 카니발7409.jpg" checked>
                                                    <label for="conversion_mood">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="무드등" class="option-image">
                                                        <div class="option-text">
                                                            <span class="option-name">무드등</span>
                                                            <span class="option-desc">천정 메인 무드등, 사이드 엠비언트 무드등</span>
                                                        </div>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="conversion_tv" id="conversion_tv" value="TV" data-price="0" data-image="assets/img/10월 29일 the lune 카니발7409.jpg" checked>
                                                    <label for="conversion_tv">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="TV" class="option-image">
                                                        <div class="option-text">
                                                            <span class="option-name">TV</span>
                                                            <span class="option-desc">27인치 스마트 TV</span>
                                                        </div>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="conversion_soundproof" id="conversion_soundproof" value="방진/방음" data-price="0" data-image="assets/img/10월 29일 the lune 카니발7409.jpg" checked>
                                                    <label for="conversion_soundproof">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="방진/방음" class="option-image">
                                                        <div class="option-text">
                                                            <span class="option-name">방진/방음</span>
                                                            <span class="option-desc">기본 방진 방음 패드 시공</span>
                                                        </div>
                                                    </label>
                                                </li>
                                            </ul>
                                        </div>
                                        
                                        <!-- 패키지 총액 및 확인 체크박스 -->
                                        <div class="conversion-package-total" style="display: flex; align-items: center; justify-content: flex-end; gap: 15px; margin-top: 20px; padding: 15px; border-top: 1px dashed #ccc;">
                                            <div class="package-price" style="font-size: 18px; font-weight: 600; color: #1a1a1a;">
                                                <span id="conversionTotalPrice">14,640,000</span>원
                                            </div>
                                            <label class="package-checkbox" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                                <input type="checkbox" id="conversion_package_confirm" name="conversion_package_confirm" style="width: 20px; height: 20px; cursor: pointer;">
                                                <span style="font-size: 14px; color: #1a1a1a;">확인</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        
                        <!-- 컨버전 옵션 선택 섹션 (3페이지) -->
                        <div class="opt-wrap" data-category="conversion-select" data-step="conversion-select" style="display: none;">
                            <form id="quoteConversionSelectForm">
                                <div class="optbx opt-conversion">
                                    <div class="optbx-top" style="display: flex; justify-content: space-between; align-items: center;">
                                        <h4>컨버전 옵션 선택</h4>
                                    </div>
                                    <div class="optbx-con">
                                        <div class="opt-data clchart top btn-lst" data-opt="conversion_select_option" data-group="컨버전옵션선택" data-choice-min="0" data-choice-limit="100" style="display: block;">
                                            <ul class="con-flex" style="flex-direction: column; gap: 8px;">
                                                <!-- 바닥 종류 -->
                                                <li class="opt-chk-item top" data-type="B" style="margin-bottom: 16px;">
                                                    <div class="opt-tit" style="margin-bottom: 8px; font-weight: 600; color: rgba(0,0,0,0.8); font-size: 14px;">바닥 종류</div>
                                                    <ul style="display: flex; flex-direction: column; gap: 8px;">
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="floor_type" id="floor_wood" value="우드 플로어" data-price="0" data-image="assets/img/10월 29일 the lune 카니발7409.jpg">
                                                            <label for="floor_wood">
                                                                <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="우드 플로어" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="우드">우드 플로어</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="floor_type" id="floor_ivory" value="아이보리" data-price="0" data-image="assets/img/시트 색깔/아이보리.jpg">
                                                            <label for="floor_ivory">
                                                                <img src="assets/img/시트 색깔/아이보리.jpg" alt="아이보리" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="아이보리">아이보리</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="floor_type" id="floor_beige" value="베이지" data-price="0" data-image="assets/img/시트 색깔/꼬냑.jpg">
                                                            <label for="floor_beige">
                                                                <img src="assets/img/시트 색깔/꼬냑.jpg" alt="베이지" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="베이지">베이지</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                    </ul>
                                                </li>
                                                
                                                <!-- 커튼 -->
                                                <li class="opt-chk-item top" data-type="B" style="margin-bottom: 16px;">
                                                    <div class="opt-tit" style="margin-bottom: 8px; font-weight: 600; color: rgba(0,0,0,0.8); font-size: 14px;">커튼</div>
                                                    <ul style="display: flex; flex-direction: column; gap: 8px;">
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="curtain" id="curtain_ivory" value="아이보리" data-price="0" data-image="assets/img/시트 색깔/아이보리.jpg">
                                                            <label for="curtain_ivory">
                                                                <img src="assets/img/시트 색깔/아이보리.jpg" alt="아이보리" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="아이보리">아이보리</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="curtain" id="curtain_beige" value="베이지" data-price="0" data-image="assets/img/시트 색깔/꼬냑.jpg">
                                                            <label for="curtain_beige">
                                                                <img src="assets/img/시트 색깔/꼬냑.jpg" alt="베이지" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="베이지">베이지</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="curtain" id="curtain_brown" value="브라운" data-price="0" data-image="assets/img/시트 색깔/브라운.jpg">
                                                            <label for="curtain_brown">
                                                                <img src="assets/img/시트 색깔/브라운.jpg" alt="브라운" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="브라운">브라운</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                    </ul>
                                                </li>
                                                
                                                <!-- 시트 -->
                                                <li class="opt-chk-item top" data-type="B" style="margin-bottom: 16px;">
                                                    <div class="opt-tit" style="margin-bottom: 8px; font-weight: 600; color: rgba(0,0,0,0.8); font-size: 14px;">시트</div>
                                                    <ul style="display: flex; flex-direction: column; gap: 8px;">
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="seat" id="seat_ivory" value="아이보리" data-price="0" data-image="assets/img/시트 색깔/아이보리.jpg">
                                                            <label for="seat_ivory">
                                                                <img src="assets/img/시트 색깔/아이보리.jpg" alt="아이보리" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="아이보리">아이보리</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="seat" id="seat_gray" value="그레이" data-price="0" data-image="assets/img/시트 색깔/그레이.jpg">
                                                            <label for="seat_gray">
                                                                <img src="assets/img/시트 색깔/그레이.jpg" alt="그레이" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="그레이">그레이</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="seat" id="seat_cognac" value="꼬냑" data-price="0" data-image="assets/img/시트 색깔/꼬냑.jpg">
                                                            <label for="seat_cognac">
                                                                <img src="assets/img/시트 색깔/꼬냑.jpg" alt="꼬냑" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="꼬냑">꼬냑</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="seat" id="seat_navy" value="네이비" data-price="0" data-image="assets/img/시트 색깔/네이비.jpg">
                                                            <label for="seat_navy">
                                                                <img src="assets/img/시트 색깔/네이비.jpg" alt="네이비" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="네이비">네이비</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="seat" id="seat_brown" value="브라운" data-price="0" data-image="assets/img/시트 색깔/브라운.jpg">
                                                            <label for="seat_brown">
                                                                <img src="assets/img/시트 색깔/브라운.jpg" alt="브라운" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="브라운">브라운</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="seat" id="seat_black" value="블랙" data-price="0" data-image="assets/img/시트 색깔/블랙.jpg">
                                                            <label for="seat_black">
                                                                <img src="assets/img/시트 색깔/블랙.jpg" alt="블랙" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="블랙">블랙</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                    </ul>
                                                </li>
                                                
                                                <!-- 도어 -->
                                                <li class="opt-chk-item top" data-type="B" style="margin-bottom: 16px;">
                                                    <div class="opt-tit" style="margin-bottom: 8px; font-weight: 600; color: rgba(0,0,0,0.8); font-size: 14px;">도어</div>
                                                    <ul style="display: flex; flex-direction: column; gap: 8px;">
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="door" id="door_ivory" value="아이보리" data-price="0" data-image="assets/img/시트 색깔/아이보리.jpg">
                                                            <label for="door_ivory">
                                                                <img src="assets/img/시트 색깔/아이보리.jpg" alt="아이보리" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="아이보리">아이보리</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="door" id="door_beige" value="베이지" data-price="0" data-image="assets/img/시트 색깔/꼬냑.jpg">
                                                            <label for="door_beige">
                                                                <img src="assets/img/시트 색깔/꼬냑.jpg" alt="베이지" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="베이지">베이지</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="door" id="door_brown" value="브라운" data-price="0" data-image="assets/img/시트 색깔/브라운.jpg">
                                                            <label for="door_brown">
                                                                <img src="assets/img/시트 색깔/브라운.jpg" alt="브라운" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="브라운">브라운</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                    </ul>
                                                </li>
                                                
                                                <!-- 천장 -->
                                                <li class="opt-chk-item top" data-type="B" style="margin-bottom: 16px;">
                                                    <div class="opt-tit" style="margin-bottom: 8px; font-weight: 600; color: rgba(0,0,0,0.8); font-size: 14px;">천장</div>
                                                    <ul style="display: flex; flex-direction: column; gap: 8px;">
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="ceiling" id="ceiling_ivory" value="아이보리" data-price="0" data-image="assets/img/시트 색깔/아이보리.jpg">
                                                            <label for="ceiling_ivory">
                                                                <img src="assets/img/시트 색깔/아이보리.jpg" alt="아이보리" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="아이보리">아이보리</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="ceiling" id="ceiling_beige" value="베이지" data-price="0" data-image="assets/img/시트 색깔/꼬냑.jpg">
                                                            <label for="ceiling_beige">
                                                                <img src="assets/img/시트 색깔/꼬냑.jpg" alt="베이지" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="베이지">베이지</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="ceiling" id="ceiling_brown" value="브라운" data-price="0" data-image="assets/img/시트 색깔/브라운.jpg">
                                                            <label for="ceiling_brown">
                                                                <img src="assets/img/시트 색깔/브라운.jpg" alt="브라운" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="브라운">브라운</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                    </ul>
                                                </li>
                                                
                                                <!-- 콘솔 헤드 -->
                                                <li class="opt-chk-item top" data-type="B" style="margin-bottom: 16px;">
                                                    <div class="opt-tit" style="margin-bottom: 8px; font-weight: 600; color: rgba(0,0,0,0.8); font-size: 14px;">콘솔 헤드</div>
                                                    <ul style="display: flex; flex-direction: column; gap: 8px;">
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="console_head" id="console_ivory" value="아이보리" data-price="0" data-image="assets/img/시트 색깔/아이보리.jpg">
                                                            <label for="console_ivory">
                                                                <img src="assets/img/시트 색깔/아이보리.jpg" alt="아이보리" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="아이보리">아이보리</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="console_head" id="console_beige" value="베이지" data-price="0" data-image="assets/img/시트 색깔/꼬냑.jpg">
                                                            <label for="console_beige">
                                                                <img src="assets/img/시트 색깔/꼬냑.jpg" alt="베이지" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="베이지">베이지</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="console_head" id="console_brown" value="브라운" data-price="0" data-image="assets/img/시트 색깔/브라운.jpg">
                                                            <label for="console_brown">
                                                                <img src="assets/img/시트 색깔/브라운.jpg" alt="브라운" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name" data-color="브라운">브라운</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                    </ul>
                                                </li>
                                                
                                                <!-- 러기지 -->
                                                <li class="opt-chk-item top" data-type="B" style="margin-bottom: 16px;">
                                                    <div class="opt-tit" style="margin-bottom: 8px; font-weight: 600; color: rgba(0,0,0,0.8); font-size: 14px;">러기지</div>
                                                    <ul style="display: flex; flex-direction: column; gap: 8px;">
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="luggage" id="luggage_ivory" value="아이보리" data-price="0" data-image="assets/img/시트 색깔/아이보리.jpg">
                                                            <label for="luggage_ivory">
                                                                <img src="assets/img/시트 색깔/아이보리.jpg" alt="아이보리" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name">아이보리</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="luggage" id="luggage_beige" value="베이지" data-price="0" data-image="assets/img/시트 색깔/꼬냑.jpg">
                                                            <label for="luggage_beige">
                                                                <img src="assets/img/시트 색깔/꼬냑.jpg" alt="베이지" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name">베이지</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="luggage" id="luggage_brown" value="브라운" data-price="0" data-image="assets/img/시트 색깔/브라운.jpg">
                                                            <label for="luggage_brown">
                                                                <img src="assets/img/시트 색깔/브라운.jpg" alt="브라운" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name">브라운</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                    </ul>
                                                </li>
                                                
                                                <!-- 트렁크 -->
                                                <li class="opt-chk-item top" data-type="B" style="margin-bottom: 16px;">
                                                    <div class="opt-tit" style="margin-bottom: 8px; font-weight: 600; color: rgba(0,0,0,0.8); font-size: 14px;">트렁크</div>
                                                    <ul style="display: flex; flex-direction: column; gap: 8px;">
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="trunk" id="trunk_ivory" value="아이보리" data-price="0" data-image="assets/img/시트 색깔/아이보리.jpg">
                                                            <label for="trunk_ivory">
                                                                <img src="assets/img/시트 색깔/아이보리.jpg" alt="아이보리" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name">아이보리</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="trunk" id="trunk_beige" value="베이지" data-price="0" data-image="assets/img/시트 색깔/꼬냑.jpg">
                                                            <label for="trunk_beige">
                                                                <img src="assets/img/시트 색깔/꼬냑.jpg" alt="베이지" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name">베이지</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                        <li class="opt-chk-item" data-type="B">
                                                            <input type="radio" name="trunk" id="trunk_brown" value="브라운" data-price="0" data-image="assets/img/시트 색깔/브라운.jpg">
                                                            <label for="trunk_brown">
                                                                <img src="assets/img/시트 색깔/브라운.jpg" alt="브라운" class="option-image">
                                                                <div class="option-text">
                                                                    <span class="option-name">브라운</span>
                                                                </div>
                                                            </label>
                                                        </li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </div>
                                        <div style="height: 150px;"></div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        
                        <!-- 추가 옵션 섹션 (4페이지) -->
                        <div class="opt-wrap" data-category="additional" data-step="additional" style="display: none;">
                            <form id="quoteAdditionalForm">
                                <div class="optbx opt-additional">
                                    <div class="optbx-top" style="display: flex; justify-content: space-between; align-items: center;">
                                        <h4>추가 옵션</h4>
                                    </div>
                                    <div class="optbx-con">
                                        <div class="opt-data clchart top btn-lst" data-opt="additional_option" data-group="추가옵션" data-choice-min="0" data-choice-limit="100" style="display: block;">
                                            <ul class="con-flex" style="flex-direction: column; gap: 8px;">
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="additional_side_step" id="additional_side_step" value="전동 사이드 스텝" data-price="1200000" data-image="assets/img/10월 29일 the lune 카니발7409.jpg">
                                                    <label for="additional_side_step">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="전동 사이드 스텝" class="option-image">
                                                        <div class="option-text">
                                                            <span class="option-name">전동 사이드 스텝</span>
                                                            <span class="option-price">1,200,000원</span>
                                                        </div>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="additional_seat_nappa" id="additional_seat_nappa" value="1,2열 시트 나파가죽 감싸기" data-price="2400000" data-image="assets/img/10월 29일 the lune 카니발7409.jpg">
                                                    <label for="additional_seat_nappa">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="1,2열 시트 나파가죽 감싸기" class="option-image">
                                                        <div class="option-text">
                                                            <span class="option-name">1,2열 시트 나파가죽 감싸기</span>
                                                            <span class="option-price">2,400,000원</span>
                                                        </div>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="additional_wood_floor" id="additional_wood_floor" value="승객석 우드플로어" data-price="3000000" data-image="assets/img/10월 29일 the lune 카니발7409.jpg">
                                                    <label for="additional_wood_floor">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="승객석 우드플로어" class="option-image">
                                                        <div class="option-text">
                                                            <span class="option-name">승객석 우드플로어</span>
                                                            <span class="option-price">3,000,000원</span>
                                                        </div>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="additional_honeycomb" id="additional_honeycomb" value="허니콤 블라인드" data-price="800000" data-image="assets/img/10월 29일 the lune 카니발7409.jpg">
                                                    <label for="additional_honeycomb">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="허니콤 블라인드" class="option-image">
                                                        <div class="option-text">
                                                            <span class="option-name">허니콤 블라인드</span>
                                                            <span class="option-price">800,000원</span>
                                                        </div>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="additional_tinting" id="additional_tinting" value="기본 틴팅" data-price="0" data-image="assets/img/10월 29일 the lune 카니발7409.jpg">
                                                    <label for="additional_tinting">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="기본 틴팅" class="option-image">
                                                        <div class="option-text">
                                                            <span class="option-name">기본 틴팅</span>
                                                            <span class="option-price">0원</span>
                                                        </div>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="additional_bed_seat" id="additional_bed_seat" value="3열 침대형 전동시트" data-price="4500000" data-image="assets/img/10월 29일 the lune 카니발7409.jpg">
                                                    <label for="additional_bed_seat">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="3열 침대형 전동시트" class="option-image">
                                                        <div class="option-text">
                                                            <span class="option-name">3열 침대형 전동시트</span>
                                                            <span class="option-price">4,500,000원</span>
                                                        </div>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="additional_starlight" id="additional_starlight" value="스타라이트" data-price="0" data-image="assets/img/10월 29일 the lune 카니발7409.jpg">
                                                    <label for="additional_starlight">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="스타라이트" class="option-image">
                                                        <div class="option-text">
                                                            <span class="option-name">스타라이트</span>
                                                            <span class="option-price">0원</span>
                                                        </div>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="additional_body_kit" id="additional_body_kit" value="프런트, 리어 GSC 바디킷" data-price="650000" data-image="assets/img/10월 29일 the lune 카니발7409.jpg">
                                                    <label for="additional_body_kit">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="프런트, 리어 GSC 바디킷" class="option-image">
                                                        <div class="option-text">
                                                            <span class="option-name">프런트, 리어 GSC 바디킷</span>
                                                            <span class="option-price">650,000원</span>
                                                        </div>
                                                    </label>
                                                </li>
                                                <li class="opt-chk-item top" data-type="B">
                                                    <input type="checkbox" name="additional_full_trimming" id="additional_full_trimming" value="도어 트렁크 러기지 풀트리밍" data-price="2600000" data-image="assets/img/10월 29일 the lune 카니발7409.jpg">
                                                    <label for="additional_full_trimming">
                                                        <img src="assets/img/10월 29일 the lune 카니발7409.jpg" alt="도어 트렁크 러기지 풀트리밍" class="option-image">
                                                        <div class="option-text">
                                                            <span class="option-name">도어 트렁크 러기지 풀트리밍</span>
                                                            <span class="option-price">2,600,000원</span>
                                                        </div>
                                                    </label>
                                                </li>
                                            </ul>
                                        </div>
                                        <div style="height: 150px;"></div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                
                <!-- 하단 고정 영역: 예상 견적 금액 + 버튼들 (CN모터스 스타일) -->
                <div class="estimate-price-section">
                    <div class="estimate-price-row">
                        <span class="estimate-price-title">예상 견적 금액</span>
                        <span class="estimate-price-value">
                            <span id="quoteTotalPrice">0</span>원
                        </span>
                    </div>
                    <div class="estimate-sidebar-btns">
                        <a href="#" id="quotePrevBtn">이전</a>
                        <a href="#" id="quoteConversionBtn">컨버전 옵션 →</a>
                        <a href="#" id="quoteViewBtn">견적보기</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Quote Page -->

    <!-- JS Files -->
    <script src="assets/js/plugins/jquery-3.6.0.min.js"></script>
    <script src="assets/js/plugins/bootstrap.bundle.min.js"></script>
    <script src="assets/js/plugins/swiper.min.js"></script>
    <script src="assets/js/plugins/aos.js"></script>
    <script src="assets/js/plugins/SplitText.min.js"></script>
    <script src="assets/js/main.js"></script>
    <!-- PDF Generation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="assets/js/quote.js?v=4.0"></script>
    
    <script>
        // 견적보기 버튼 이벤트 강제 연결
        function ensureButtonEvents() {
            const quoteViewBtn = document.getElementById('quoteViewBtn');
            if (quoteViewBtn) {
                // 기존 이벤트 제거 후 재등록
                const newBtn = quoteViewBtn.cloneNode(true);
                quoteViewBtn.parentNode.replaceChild(newBtn, quoteViewBtn);
                
                newBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('견적보기 버튼 클릭됨 (강제 연결)');
                    if (typeof window.showQuote === 'function') {
                        window.showQuote();
                    } else if (typeof showQuote === 'function') {
                        showQuote();
                    } else {
                        alert('견적 기능을 불러오는 중입니다. 잠시 후 다시 시도해주세요.');
                    }
                });
                console.log('견적보기 버튼 이벤트 강제 연결 완료');
            }
            
            // 이전 버튼 클릭 시 이전 페이지로 이동 (모든 단계에서 작동)
            const quotePrevBtn = document.getElementById('quotePrevBtn');
            if (quotePrevBtn) {
                // 기존 이벤트 리스너 제거를 위해 클론
                const newBtn = quotePrevBtn.cloneNode(true);
                quotePrevBtn.parentNode.replaceChild(newBtn, quotePrevBtn);
                
                newBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('이전 버튼 클릭됨');
                    
                    // 현재 단계 확인 (여러 방법으로 시도)
                    let currentStep = 'model-spec';
                    
                    // 1. window.currentStep 확인 (가장 확실)
                    if (typeof window.currentStep !== 'undefined' && window.currentStep) {
                        currentStep = window.currentStep;
                        console.log('window.currentStep 사용:', currentStep);
                    }
                    // 2. 현재 표시된 opt-wrap 확인
                    else {
                        const currentWrap = document.querySelector('.opt-wrap[style*="block"], .opt-wrap[style*="block;"]');
                        if (currentWrap) {
                            currentStep = currentWrap.getAttribute('data-step') || 'model-spec';
                            console.log('현재 표시된 opt-wrap 사용:', currentStep);
                        } else {
                            // 모든 opt-wrap 확인
                            document.querySelectorAll('.opt-wrap').forEach(function(wrap) {
                                if (wrap.style.display !== 'none' && wrap.style.display !== '') {
                                    currentStep = wrap.getAttribute('data-step') || 'model-spec';
                                    console.log('표시된 opt-wrap 발견:', currentStep);
                                }
                            });
                        }
                    }
                    
                    console.log('최종 현재 단계:', currentStep);
                    
                    // 단계 정의
                    const steps = ['model-spec', 'conversion', 'conversion-select', 'additional'];
                    const currentIndex = steps.indexOf(currentStep);
                    console.log('현재 인덱스:', currentIndex);
                    const prevIndex = currentIndex - 1;
                    
                    if (prevIndex >= 0) {
                        const prevStep = steps[prevIndex];
                        console.log('이전 단계로 이동:', prevStep, '인덱스:', prevIndex);
                        
                        // 모든 opt-wrap 숨기기
                        document.querySelectorAll('.opt-wrap').forEach(function(wrap) {
                            wrap.style.display = 'none';
                        });
                        
                        // 이전 단계 표시
                        const prevWrap = document.querySelector('.opt-wrap[data-step="' + prevStep + '"]');
                        if (prevWrap) {
                            prevWrap.style.display = 'block';
                            console.log('페이지 표시됨:', prevStep);
                            
                            // currentStep 업데이트 (quote.js와 동기화)
                            if (typeof window.setCurrentStep === 'function') {
                                window.setCurrentStep(prevStep);
                            } else {
                                window.currentStep = prevStep;
                            }
                            
                            // quote.js의 currentStep 변수도 직접 업데이트 시도
                            try {
                                if (typeof currentStep !== 'undefined') {
                                    eval('currentStep = "' + prevStep + '"');
                                }
                            } catch(e) {
                                console.log('currentStep 직접 업데이트 실패:', e);
                            }
                            
                            // 상태바 직접 업데이트 (확실하게)
                            const stepTitles = {
                                'model-spec': '모델/사양',
                                'conversion': '컨버전 옵션',
                                'conversion-select': '컨버전 옵션 선택',
                                'additional': '추가 옵션'
                            };
                            
                            const stepTitle = stepTitles[prevStep] || prevStep;
                            const stepNumber = prevIndex + 1;
                            const totalSteps = 4;
                            
                            // 제목 업데이트
                            const titleElement = document.getElementById('currentStepTitle');
                            if (titleElement) {
                                titleElement.textContent = stepTitle;
                            }
                            
                            // 진행률 텍스트 업데이트
                            const progressElement = document.getElementById('currentStepProgress');
                            if (progressElement) {
                                progressElement.textContent = stepNumber + '/' + totalSteps;
                            }
                            
                            // 진행 바 업데이트
                            const progressBars = document.querySelectorAll('.prog-bar li');
                            progressBars.forEach(function(bar, index) {
                                if (index <= prevIndex) {
                                    bar.classList.add('active');
                                    bar.style.background = '#1a1a1a';
                                } else {
                                    bar.classList.remove('active');
                                    bar.style.background = 'rgba(0,0,0,0.1)';
                                }
                            });
                            
                            console.log('상태바 업데이트 완료:', stepTitle, stepNumber + '/' + totalSteps);
                            
                            // 버튼 텍스트 직접 업데이트 (확실하게)
                            const conversionBtn = document.getElementById('quoteConversionBtn');
                            const prevBtn = document.getElementById('quotePrevBtn');
                            
                            if (prevStep === 'model-spec') {
                                // 1페이지: 컨버전 옵션 → 버튼
                                if (conversionBtn) {
                                    conversionBtn.textContent = '컨버전 옵션 →';
                                    conversionBtn.style.display = 'block';
                                }
                                if (prevBtn) {
                                    prevBtn.style.display = 'block';
                                }
                            } else if (prevStep === 'conversion') {
                                // 2페이지: 컨버전 옵션 선택 → 버튼
                                if (conversionBtn) {
                                    conversionBtn.textContent = '컨버전 옵션 선택 →';
                                    conversionBtn.style.display = 'block';
                                }
                                if (prevBtn) {
                                    prevBtn.style.display = 'block';
                                }
                            } else if (prevStep === 'conversion-select') {
                                // 3페이지: 추가 옵션 → 버튼
                                if (conversionBtn) {
                                    conversionBtn.textContent = '추가 옵션 →';
                                    conversionBtn.style.display = 'block';
                                }
                                if (prevBtn) {
                                    prevBtn.style.display = 'block';
                                }
                            } else if (prevStep === 'additional') {
                                // 4페이지: 견적내기 완료 버튼
                                if (conversionBtn) {
                                    conversionBtn.textContent = '견적내기 완료';
                                    conversionBtn.style.display = 'block';
                                }
                                if (prevBtn) {
                                    prevBtn.style.display = 'block';
                                }
                            }
                            
                            console.log('버튼 텍스트 업데이트 완료 (이전 버튼):', prevStep);
                            
                            // quote.js 함수 호출 (있으면)
                            if (typeof showStep === 'function') {
                                showStep(prevStep);
                            } else if (typeof window.showStep === 'function') {
                                window.showStep(prevStep);
                            }
                            if (typeof updateStepButtons === 'function') {
                                updateStepButtons();
                            } else if (typeof window.updateStepButtons === 'function') {
                                window.updateStepButtons();
                            }
                            if (typeof updateProgressBar === 'function') {
                                updateProgressBar();
                            } else if (typeof window.updateProgressBar === 'function') {
                                window.updateProgressBar();
                            }
                        } else {
                            console.error('이전 단계를 찾을 수 없습니다:', prevStep);
                        }
                    } else {
                        console.log('첫 번째 단계입니다.');
                    }
                });
                console.log('이전 버튼 이벤트 리스너 추가됨');
            }
            
            // 컨버전 옵션 버튼 클릭 시 다음 페이지로 이동 (모든 단계에서 작동)
            const quoteConversionBtn = document.getElementById('quoteConversionBtn');
            if (quoteConversionBtn) {
                // 기존 이벤트 리스너 제거를 위해 클론
                const newBtn = quoteConversionBtn.cloneNode(true);
                quoteConversionBtn.parentNode.replaceChild(newBtn, quoteConversionBtn);
                
                newBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('컨버전 옵션 버튼 클릭됨');
                    
                    // 현재 단계 확인 (여러 방법으로 시도)
                    let currentStep = 'model-spec';
                    
                    // 1. window.currentStep 확인 (가장 확실)
                    if (typeof window.currentStep !== 'undefined' && window.currentStep) {
                        currentStep = window.currentStep;
                        console.log('window.currentStep 사용:', currentStep);
                    }
                    // 2. quote.js의 currentStep 변수 확인
                    else if (typeof currentStep !== 'undefined' && currentStep !== 'model-spec') {
                        // 이미 currentStep 변수가 있으면 사용
                        console.log('quote.js currentStep 사용:', currentStep);
                    }
                    // 3. 현재 표시된 opt-wrap 확인
                    else {
                        const currentWrap = document.querySelector('.opt-wrap[style*="block"], .opt-wrap[style*="block;"]');
                        if (currentWrap) {
                            currentStep = currentWrap.getAttribute('data-step') || 'model-spec';
                            console.log('현재 표시된 opt-wrap 사용:', currentStep);
                        } else {
                            // 모든 opt-wrap 확인
                            document.querySelectorAll('.opt-wrap').forEach(function(wrap) {
                                if (wrap.style.display !== 'none' && wrap.style.display !== '') {
                                    currentStep = wrap.getAttribute('data-step') || 'model-spec';
                                    console.log('표시된 opt-wrap 발견:', currentStep);
                                }
                            });
                        }
                    }
                    
                    console.log('최종 현재 단계:', currentStep);
                    
                    // 4페이지(additional)에서 버튼을 클릭하면 견적보기 모달 열기
                    if (currentStep === 'additional') {
                        console.log('4페이지에서 견적내기 완료 버튼 클릭됨');
                        if (typeof showQuote === 'function') {
                            showQuote();
                        } else if (typeof window.showQuote === 'function') {
                            window.showQuote();
                        } else {
                            alert('견적 기능을 불러오는 중입니다. 잠시 후 다시 시도해주세요.');
                        }
                        return; // 다음 페이지로 이동하지 않음
                    }
                    
                    // 단계 정의
                    const steps = ['model-spec', 'conversion', 'conversion-select', 'additional'];
                    const currentIndex = steps.indexOf(currentStep);
                    console.log('현재 인덱스:', currentIndex, 'steps:', steps);
                    const nextIndex = currentIndex + 1;
                    
                    if (nextIndex < steps.length) {
                        const nextStep = steps[nextIndex];
                        console.log('다음 단계로 이동:', nextStep, '인덱스:', nextIndex);
                        
                        // 모든 opt-wrap 숨기기
                        document.querySelectorAll('.opt-wrap').forEach(function(wrap) {
                            wrap.style.display = 'none';
                        });
                        
                        // 다음 단계 표시
                        const nextWrap = document.querySelector('.opt-wrap[data-step="' + nextStep + '"]');
                        if (nextWrap) {
                            nextWrap.style.display = 'block';
                            console.log('페이지 표시됨:', nextStep);
                            
                            // currentStep 업데이트 (quote.js와 동기화)
                            if (typeof window.setCurrentStep === 'function') {
                                window.setCurrentStep(nextStep);
                            } else {
                                window.currentStep = nextStep;
                            }
                            
                            // quote.js의 currentStep 변수도 직접 업데이트 시도
                            try {
                                if (typeof currentStep !== 'undefined') {
                                    // quote.js의 currentStep 변수에 직접 할당 시도
                                    eval('currentStep = "' + nextStep + '"');
                                }
                            } catch(e) {
                                console.log('currentStep 직접 업데이트 실패:', e);
                            }
                            
                            // quote.js 함수 호출 (있으면)
                            if (typeof showStep === 'function') {
                                showStep(nextStep);
                            } else if (typeof window.showStep === 'function') {
                                window.showStep(nextStep);
                            }
                            // 버튼 텍스트 직접 업데이트 (확실하게)
                            const conversionBtn = document.getElementById('quoteConversionBtn');
                            const prevBtn = document.getElementById('quotePrevBtn');
                            
                            if (nextStep === 'model-spec') {
                                // 1페이지: 컨버전 옵션 → 버튼
                                if (conversionBtn) {
                                    conversionBtn.textContent = '컨버전 옵션 →';
                                    conversionBtn.style.display = 'block';
                                }
                                if (prevBtn) {
                                    prevBtn.style.display = 'block';
                                }
                            } else if (nextStep === 'conversion') {
                                // 2페이지: 컨버전 옵션 선택 → 버튼
                                if (conversionBtn) {
                                    conversionBtn.textContent = '컨버전 옵션 선택 →';
                                    conversionBtn.style.display = 'block';
                                }
                                if (prevBtn) {
                                    prevBtn.style.display = 'block';
                                }
                            } else if (nextStep === 'conversion-select') {
                                // 3페이지: 추가 옵션 → 버튼
                                if (conversionBtn) {
                                    conversionBtn.textContent = '추가 옵션 →';
                                    conversionBtn.style.display = 'block';
                                }
                                if (prevBtn) {
                                    prevBtn.style.display = 'block';
                                }
                            } else if (nextStep === 'additional') {
                                // 4페이지: 견적내기 완료 표시
                                if (conversionBtn) {
                                    conversionBtn.textContent = '견적내기 완료';
                                    conversionBtn.style.display = 'block';
                                    // 이벤트 리스너는 버튼 클릭 핸들러에서 처리하므로 여기서는 텍스트만 변경
                                }
                                if (prevBtn) {
                                    prevBtn.style.display = 'block';
                                }
                            }
                            
                            console.log('버튼 텍스트 업데이트 완료:', nextStep);
                            
                            if (typeof updateStepButtons === 'function') {
                                updateStepButtons();
                            } else if (typeof window.updateStepButtons === 'function') {
                                window.updateStepButtons();
                            }
                            // 상태바 직접 업데이트 (확실하게)
                            const stepTitles = {
                                'model-spec': '모델/사양',
                                'conversion': '컨버전 옵션',
                                'conversion-select': '컨버전 옵션 선택',
                                'additional': '추가 옵션'
                            };
                            
                            const stepTitle = stepTitles[nextStep] || nextStep;
                            const stepNumber = nextIndex + 1;
                            const totalSteps = 4;
                            
                            // 제목 업데이트
                            const titleElement = document.getElementById('currentStepTitle');
                            if (titleElement) {
                                titleElement.textContent = stepTitle;
                            }
                            
                            // 진행률 텍스트 업데이트
                            const progressElement = document.getElementById('currentStepProgress');
                            if (progressElement) {
                                progressElement.textContent = stepNumber + '/' + totalSteps;
                            }
                            
                            // 진행 바 업데이트
                            const progressBars = document.querySelectorAll('.prog-bar li');
                            progressBars.forEach(function(bar, index) {
                                if (index <= nextIndex) {
                                    bar.classList.add('active');
                                    bar.style.background = '#1a1a1a';
                                } else {
                                    bar.classList.remove('active');
                                    bar.style.background = 'rgba(0,0,0,0.1)';
                                }
                            });
                            
                            console.log('상태바 업데이트 완료:', stepTitle, stepNumber + '/' + totalSteps);
                            
                            if (typeof updateProgressBar === 'function') {
                                updateProgressBar();
                            } else if (typeof window.updateProgressBar === 'function') {
                                window.updateProgressBar();
                            }
                        } else {
                            console.error('다음 단계를 찾을 수 없습니다:', nextStep);
                            console.log('사용 가능한 opt-wrap들:');
                            document.querySelectorAll('.opt-wrap').forEach(function(wrap) {
                                console.log('- data-step:', wrap.getAttribute('data-step'));
                            });
                        }
                    } else {
                        console.log('마지막 단계입니다.');
                    }
                });
                console.log('컨버전 옵션 버튼 이벤트 리스너 추가됨 (HTML 인라인)');
            }
        }
        
        // 직접 가격 계산 함수
        function calculatePriceDirectly() {
            let total = 0;
            
            // 모든 체크된 라디오 버튼과 체크박스의 가격 합산
            const allInputs = document.querySelectorAll('#quoteForm input[type="radio"]:checked, #quoteForm input[type="checkbox"]:checked');
            allInputs.forEach(function(input) {
                // 컨버전 옵션의 기본 체크박스는 제외
                if (input.id && input.id.endsWith('_base')) {
                    return;
                }
                const price = parseInt(input.dataset.price) || 0;
                total += price;
                console.log('가격 합산:', input.id, price, '총합:', total);
            });
            
            // 컨버전 옵션은 확인 체크박스가 체크되었을 때만 패키지 가격으로 계산
            const CONVERSION_PACKAGE_PRICE = 14640000;
            const conversionConfirmCheckbox = document.getElementById('conversion_package_confirm');
            
            // 확인 체크박스가 체크되어 있으면 컨버전 패키지 가격 추가
            if (conversionConfirmCheckbox && conversionConfirmCheckbox.checked) {
                total += CONVERSION_PACKAGE_PRICE;
                console.log('컨버전 패키지 가격 추가:', CONVERSION_PACKAGE_PRICE);
            }
            
            // 예상 견적 금액 업데이트
            const totalPriceEl = document.getElementById('quoteTotalPrice');
            if (totalPriceEl) {
                const formatted = total.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                totalPriceEl.textContent = formatted;
                console.log('예상 견적 금액 업데이트:', formatted);
            }
            
            return total;
        }
        
        // 가격 업데이트 함수 (주기적으로 실행)
        function updatePricePeriodically() {
            calculatePriceDirectly();
            
            // quote.js 함수도 호출 (있는 경우)
            if (typeof window.calculateTotalPrice === 'function') {
                window.calculateTotalPrice();
            }
            if (typeof window.updatePriceDisplay === 'function') {
                window.updatePriceDisplay();
            }
        }
        
        // 옵션 선택에 따라 이미지 변경 (나중에 구현)
        document.addEventListener('DOMContentLoaded', function() {
            // 버튼 이벤트 강제 연결
            ensureButtonEvents();
            
            // quote.js 로드 후에도 다시 연결
            setTimeout(ensureButtonEvents, 500);
            setTimeout(ensureButtonEvents, 1000);
            setTimeout(ensureButtonEvents, 2000);
            
            // 초기 가격 계산
            setTimeout(updatePricePeriodically, 300);
            setTimeout(updatePricePeriodically, 800);
            setTimeout(updatePricePeriodically, 1500);
            setTimeout(updatePricePeriodically, 2500);
            // 이미지 표시 확인
            const mainImage = document.getElementById('mainCarImage');
            if (mainImage) {
                mainImage.onerror = function() {
                    console.error('이미지 로드 실패:', this.src);
                };
                mainImage.onload = function() {
                    console.log('이미지 로드 성공');
                };
            }
            
            // 순정 옵션 이미지 클릭 시 메인 이미지와 박스 이미지 변경
            const standardOptionInputs = document.querySelectorAll('.opt-standard input[type="checkbox"]');
            standardOptionInputs.forEach(function(input) {
                // 순정 옵션은 체크 해제 방지
                input.addEventListener('click', function(e) {
                    if (!this.checked) {
                        // 체크 해제 시도를 막고 다시 체크
                        e.preventDefault();
                        e.stopPropagation();
                        this.checked = true;
                        return false;
                    }
                });
                
                // change 이벤트에서도 체크 해제 방지
                input.addEventListener('change', function(e) {
                    if (!this.checked) {
                        // 체크 해제 방지
                        this.checked = true;
                        e.preventDefault();
                        e.stopPropagation();
                        return false;
                    }
                    
                    // 체크된 상태에서 가격 계산
                    if (this.checked) {
                        const price = parseInt(this.dataset.price) || 0;
                        const optionName = this.value;
                        
                        // quote.js의 가격 계산 함수 호출
                        if (typeof window.handleOptionChange === 'function') {
                            window.handleOptionChange({ target: this });
                        } else if (typeof handleOptionChange === 'function') {
                            handleOptionChange({ target: this });
                        }
                        
                        // 가격 업데이트
                        if (typeof window.calculateTotalPrice === 'function') {
                            window.calculateTotalPrice();
                        } else if (typeof calculateTotalPrice === 'function') {
                            calculateTotalPrice();
                        }
                        
                        if (typeof window.updatePriceDisplay === 'function') {
                            window.updatePriceDisplay();
                        } else if (typeof updatePriceDisplay === 'function') {
                            updatePriceDisplay();
                        }
                    }
                });
                
                const imageUrl = input.dataset.image;
                if (imageUrl) {
                    // 옵션 이미지 클릭 이벤트
                    const label = input.nextElementSibling;
                    const optionImage = label ? label.querySelector('.option-image') : null;
                    if (optionImage) {
                        optionImage.addEventListener('click', function(e) {
                            e.stopPropagation();
                            // 메인 이미지 변경
                            if (mainImage) {
                                mainImage.src = imageUrl;
                            }
                            // 박스 안의 모든 옵션 이미지 변경
                            const allOptionImages = document.querySelectorAll('.opt-standard .option-image');
                            allOptionImages.forEach(function(img) {
                                img.src = imageUrl;
                            });
                        });
                    }
                }
            });
            
            // 모델, 트림, 유종 선택 시 가격 합산 (강제 이벤트 연결)
            function setupPriceCalculation() {
                const modelInputs = document.querySelectorAll('input[name="model_type"], input[name="trim_level"], input[name="trim_engine"]');
                console.log('가격 계산 설정 - 찾은 input 개수:', modelInputs.length);
                
                modelInputs.forEach(function(input) {
                    // 기존 이벤트 제거 후 재등록
                    const newInput = input.cloneNode(true);
                    input.parentNode.replaceChild(newInput, input);
                    
                    const price = parseInt(newInput.dataset.price) || 0;
                    console.log('Input 설정:', newInput.id, '가격:', price);
                    
                    // change 이벤트
                    newInput.addEventListener('change', function() {
                        console.log('=== 가격 계산 이벤트 발생 ===');
                        console.log('Input ID:', this.id);
                        console.log('Checked:', this.checked);
                        console.log('Price:', parseInt(this.dataset.price) || 0);
                        
                        // quote.js 함수 호출
                        if (typeof window.handleOptionChange === 'function') {
                            console.log('handleOptionChange 호출');
                            window.handleOptionChange({ target: this });
                        }
                        
                        // 직접 가격 계산 및 업데이트
                        setTimeout(function() {
                            calculatePriceDirectly();
                            
                            // quote.js 함수도 호출
                            if (typeof window.handleOptionChange === 'function') {
                                window.handleOptionChange({ target: this });
                            }
                            if (typeof window.calculateTotalPrice === 'function') {
                                window.calculateTotalPrice();
                            }
                            if (typeof window.updatePriceDisplay === 'function') {
                                window.updatePriceDisplay();
                            }
                        }, 50);
                    });
                    
                    // click 이벤트 (라디오 버튼)
                    if (newInput.type === 'radio') {
                        newInput.addEventListener('click', function() {
                            console.log('라디오 버튼 클릭:', this.id);
                            setTimeout(function() {
                                if (newInput.checked) {
                                    const price = parseInt(newInput.dataset.price) || 0;
                                    console.log('라디오 버튼 가격:', price);
                                    
                                    // 직접 가격 계산
                                    calculatePriceDirectly();
                                    
                                    // quote.js 함수도 호출
                                    if (typeof window.handleOptionChange === 'function') {
                                        window.handleOptionChange({ target: newInput });
                                    }
                                    setTimeout(function() {
                                        if (typeof window.calculateTotalPrice === 'function') {
                                            window.calculateTotalPrice();
                                        }
                                        if (typeof window.updatePriceDisplay === 'function') {
                                            window.updatePriceDisplay();
                                        }
                                    }, 50);
                                }
                            }, 50);
                        });
                    }
                });
            }
            
            // 즉시 실행
            setupPriceCalculation();
            
            // quote.js 로드 후에도 다시 실행
            setTimeout(setupPriceCalculation, 500);
            setTimeout(setupPriceCalculation, 1000);
            setTimeout(setupPriceCalculation, 2000);
            
            // 페이지 로드 시 순정 옵션 가격 합산
            setTimeout(function() {
                standardOptionInputs.forEach(function(input) {
                    if (input.checked) {
                        const price = parseInt(input.dataset.price) || 0;
                        if (price > 0) {
                            // 가격 계산 함수 호출
                            if (typeof window.handleOptionChange === 'function') {
                                window.handleOptionChange({ target: input });
                            } else if (typeof handleOptionChange === 'function') {
                                handleOptionChange({ target: input });
                            }
                        }
                    }
                });
                
                // 모델, 트림, 유종 초기 선택 상태 확인 및 가격 합산
                const modelInputs = document.querySelectorAll('input[name="model_type"], input[name="trim_level"], input[name="trim_engine"]');
                modelInputs.forEach(function(input) {
                    if (input.checked) {
                        const price = parseInt(input.dataset.price) || 0;
                        if (price > 0) {
                            if (typeof window.handleOptionChange === 'function') {
                                window.handleOptionChange({ target: input });
                            } else if (typeof handleOptionChange === 'function') {
                                handleOptionChange({ target: input });
                            }
                        }
                    }
                });
                
                // 직접 가격 계산
                calculatePriceDirectly();
                
                // 가격 업데이트
                if (typeof window.calculateTotalPrice === 'function') {
                    window.calculateTotalPrice();
                } else if (typeof calculateTotalPrice === 'function') {
                    calculateTotalPrice();
                }
                
                if (typeof window.updatePriceDisplay === 'function') {
                    window.updatePriceDisplay();
                } else if (typeof updatePriceDisplay === 'function') {
                    updatePriceDisplay();
                }
            }, 1000);
            
            // 모든 input 변경 시 가격 재계산
            const form = document.getElementById('quoteForm');
            if (form) {
                form.addEventListener('change', function(e) {
                    if (e.target.type === 'radio' || e.target.type === 'checkbox') {
                        setTimeout(calculatePriceDirectly, 100);
                    }
                });
                
                form.addEventListener('click', function(e) {
                    if (e.target.type === 'radio' || e.target.type === 'checkbox') {
                        setTimeout(calculatePriceDirectly, 100);
                    }
                });
            }
            
            // 컨버전 확인 체크박스 이벤트 리스너
            const conversionConfirmCheckbox = document.getElementById('conversion_package_confirm');
            if (conversionConfirmCheckbox) {
                conversionConfirmCheckbox.addEventListener('change', function() {
                    console.log('컨버전 확인 체크박스 변경:', this.checked);
                    setTimeout(function() {
                        if (typeof calculatePriceDirectly === 'function') {
                            calculatePriceDirectly();
                        }
                    }, 100);
                });
            }
            
            // 기본 컨버전 옵션 체크박스 해제 방지
            const conversionOptions = ['conversion_roof', 'conversion_mood', 'conversion_tv', 'conversion_soundproof'];
            conversionOptions.forEach(function(optionId) {
                const optionInput = document.getElementById(optionId);
                if (optionInput) {
                    // 클릭 이벤트로 체크 해제 방지
                    optionInput.addEventListener('click', function(e) {
                        if (!this.checked) {
                            e.preventDefault();
                            this.checked = true;
                            console.log('컨버전 옵션 해제 방지:', optionId);
                        }
                    });
                    // change 이벤트로도 체크 해제 방지
                    optionInput.addEventListener('change', function(e) {
                        if (!this.checked) {
                            this.checked = true;
                            console.log('컨버전 옵션 해제 방지 (change):', optionId);
                        }
                    });
                }
            });
            
            // 새로고침 버튼 클릭 시 폼 초기화 (모든 페이지)
            const resetBtn = document.getElementById('resetQuoteBtn');
            if (resetBtn) {
                // 기존 이벤트 리스너 제거를 위해 클론
                const newBtn = resetBtn.cloneNode(true);
                resetBtn.parentNode.replaceChild(newBtn, resetBtn);
                
                newBtn.addEventListener('click', function() {
                    // quote.js의 resetQuote 함수 호출 (있으면)
                    if (typeof resetQuote === 'function') {
                        resetQuote();
                    } else if (typeof window.resetQuote === 'function') {
                        window.resetQuote();
                    } else {
                        // resetQuote 함수가 없으면 직접 처리
                        // 모든 폼 리셋
                        const forms = ['quoteForm', 'quoteConversionForm', 'quoteConversionSelectForm', 'quoteAdditionalForm'];
                        forms.forEach(function(formId) {
                            const form = document.getElementById(formId);
                            if (form) {
                                form.reset();
                            }
                        });
                        
                        // 모든 체크박스와 라디오 버튼 해제 (순정 옵션 제외)
                        document.querySelectorAll('input[type="checkbox"], input[type="radio"]').forEach(function(input) {
                            // 순정 옵션은 해제하지 않음
                            if (!input.closest('.opt-standard')) {
                                input.checked = false;
                                input.dispatchEvent(new Event('change', { bubbles: true }));
                            }
                        });
                        
                        // 컨버전 옵션 강제 해제
                        const conversionOptions = ['conversion_roof', 'conversion_mood', 'conversion_tv', 'conversion_soundproof', 'conversion_package_confirm'];
                        conversionOptions.forEach(function(optionId) {
                            const optionInput = document.getElementById(optionId);
                            if (optionInput) {
                                optionInput.checked = false;
                                optionInput.dispatchEvent(new Event('change', { bubbles: true }));
                            }
                        });
                        
                        // 가격 초기화
                        if (typeof window.totalPrice !== 'undefined') {
                            window.totalPrice = 0;
                        }
                        if (typeof window.selectedOptions !== 'undefined') {
                            window.selectedOptions = {};
                        }
                        
                        const totalPriceElement = document.getElementById('quoteTotalPrice');
                        if (totalPriceElement) {
                            totalPriceElement.textContent = '0';
                        }
                        
                        // 첫 번째 페이지로 돌아가기
                        window.currentStep = 'model-spec';
                        
                        // 모든 opt-wrap 숨기기
                        document.querySelectorAll('.opt-wrap').forEach(function(wrap) {
                            wrap.style.display = 'none';
                        });
                        
                        // 첫 번째 페이지 표시
                        const modelSpecWrap = document.querySelector('.opt-wrap[data-step="model-spec"]');
                        if (modelSpecWrap) {
                            modelSpecWrap.style.display = 'block';
                        }
                        
                        // 상태바 초기화
                        const titleElement = document.getElementById('currentStepTitle');
                        if (titleElement) {
                            titleElement.textContent = '모델/사양';
                        }
                        
                        const progressElement = document.getElementById('currentStepProgress');
                        if (progressElement) {
                            progressElement.textContent = '1/4';
                        }
                        
                        // 진행 바 초기화
                        const progressBars = document.querySelectorAll('.prog-bar li');
                        progressBars.forEach(function(bar, index) {
                            if (index === 0) {
                                bar.classList.add('active');
                                bar.style.background = '#1a1a1a';
                            } else {
                                bar.classList.remove('active');
                                bar.style.background = 'rgba(0,0,0,0.1)';
                            }
                        });
                        
                        // quote.js 함수 호출 (있으면)
                        if (typeof calculateTotalPrice === 'function') {
                            calculateTotalPrice();
                        } else if (typeof window.calculateTotalPrice === 'function') {
                            window.calculateTotalPrice();
                        }
                        if (typeof updatePriceDisplay === 'function') {
                            updatePriceDisplay();
                        } else if (typeof window.updatePriceDisplay === 'function') {
                            window.updatePriceDisplay();
                        }
                        if (typeof updateStepButtons === 'function') {
                            updateStepButtons();
                        } else if (typeof window.updateStepButtons === 'function') {
                            window.updateStepButtons();
                        }
                        if (typeof updateProgressBar === 'function') {
                            updateProgressBar();
                        } else if (typeof window.updateProgressBar === 'function') {
                            window.updateProgressBar();
                        }
                        
                        console.log('모든 선택이 초기화되었습니다. (HTML 인라인)');
                    }
                });
            }
        });
        
        // 추가 옵션 체크박스 이벤트 리스너 (4페이지)
        function setupAdditionalOptionsListeners() {
            const additionalForm = document.getElementById('quoteAdditionalForm');
            if (!additionalForm) {
                console.log('추가 옵션 폼을 찾을 수 없음');
                return;
            }
            
            const checkboxes = additionalForm.querySelectorAll('input[type="checkbox"]');
            console.log('추가 옵션 체크박스 개수:', checkboxes.length);
            
            checkboxes.forEach(function(checkbox) {
                // 기존 이벤트 리스너 제거
                const newCheckbox = checkbox.cloneNode(true);
                checkbox.parentNode.replaceChild(newCheckbox, checkbox);
                
                // change 이벤트 리스너 추가
                newCheckbox.addEventListener('change', function(e) {
                    e.stopPropagation();
                    console.log('=== 추가 옵션 체크박스 변경 ===');
                    console.log('ID:', newCheckbox.id);
                    console.log('Checked:', newCheckbox.checked);
                    console.log('Price:', newCheckbox.dataset.price);
                    
                    const price = parseInt(newCheckbox.dataset.price) || 0;
                    const optionKey = '추가옵션_' + newCheckbox.value;
                    
                    // selectedOptions 업데이트
                    if (typeof window.selectedOptions === 'undefined') {
                        window.selectedOptions = {};
                    }
                    
                    if (newCheckbox.checked) {
                        window.selectedOptions[optionKey] = {
                            name: newCheckbox.value,
                            price: price,
                            element: newCheckbox
                        };
                        console.log('✅ 옵션 추가:', optionKey, price);
                    } else {
                        delete window.selectedOptions[optionKey];
                        console.log('❌ 옵션 제거:', optionKey);
                    }
                    
                    // 모든 페이지의 옵션 합산 (앞 페이지 + 4페이지)
                    // quote.js의 calculateTotalPrice 함수 호출 (로컬 selectedOptions와 window.selectedOptions 모두 합산)
                    if (typeof calculateTotalPrice === 'function') {
                        calculateTotalPrice();
                        console.log('✅ calculateTotalPrice 호출됨, 총액:', window.totalPrice);
                    } else if (typeof window.calculateTotalPrice === 'function') {
                        window.calculateTotalPrice();
                        console.log('✅ window.calculateTotalPrice 호출됨, 총액:', window.totalPrice);
                    } else {
                        // calculateTotalPrice가 없으면 직접 계산
                        // window.selectedOptions의 모든 옵션 합산
                        let total = 0;
                        if (window.selectedOptions) {
                            Object.values(window.selectedOptions).forEach(function(option) {
                                total += (option.price || 0);
                            });
                            console.log('📋 window.selectedOptions 옵션 개수:', Object.keys(window.selectedOptions).length);
                        }
                        window.totalPrice = total;
                        console.log('💰 총 가격 (직접 계산):', total);
                    }
                    
                    // 최종 가격 확인 및 업데이트
                    const finalTotal = window.totalPrice || 0;
                    console.log('💰 최종 총액:', finalTotal);
                    
                    // 가격 표시 업데이트
                    const quoteTotalPriceEl = document.getElementById('quoteTotalPrice');
                    if (quoteTotalPriceEl) {
                        const formattedPrice = finalTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                        quoteTotalPriceEl.textContent = formattedPrice;
                        console.log('✅ 가격 표시 업데이트:', formattedPrice);
                    }
                    
                    // quote.js의 updatePriceDisplay도 호출 (다른 가격 표시도 업데이트)
                    if (typeof updatePriceDisplay === 'function') {
                        updatePriceDisplay();
                    } else if (typeof window.updatePriceDisplay === 'function') {
                        window.updatePriceDisplay();
                    }
                });
                
                // label 클릭 이벤트
                const label = newCheckbox.closest('label');
                if (label) {
                    label.addEventListener('click', function(e) {
                        if (e.target !== newCheckbox && e.target.tagName !== 'INPUT') {
                            setTimeout(function() {
                                newCheckbox.checked = !newCheckbox.checked;
                                const changeEvent = new Event('change', { bubbles: true });
                                newCheckbox.dispatchEvent(changeEvent);
                            }, 10);
                        }
                    });
                }
                
                console.log('✅ 추가 옵션 체크박스 이벤트 리스너 설정:', newCheckbox.id);
            });
        }
        
        // 페이지 로드 시 추가 옵션 이벤트 리스너 설정
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                setupAdditionalOptionsListeners();
            }, 1000);
        });
        
        // 추가 옵션 페이지로 이동할 때마다 이벤트 리스너 재설정
        let additionalListenersSetup = false;
        function checkAndSetupAdditionalListeners() {
            try {
                const additionalWrap = document.querySelector('.opt-wrap[data-step="additional"]');
                if (additionalWrap && additionalWrap.style.display !== 'none' && additionalWrap.style.display !== '') {
                    if (!additionalListenersSetup) {
                        setTimeout(function() {
                            setupAdditionalOptionsListeners();
                            additionalListenersSetup = true;
                        }, 300);
                    }
                } else {
                    additionalListenersSetup = false;
                }
            } catch(e) {
                console.error('checkAndSetupAdditionalListeners 오류:', e);
            }
        }
        
        // DOM 로드 후 MutationObserver 설정 (안전하게)
        function setupMutationObserver() {
            try {
                if (typeof MutationObserver === 'undefined') {
                    console.log('MutationObserver를 지원하지 않는 브라우저입니다.');
                    return;
                }
                
                // MutationObserver로 opt-wrap의 display 변경 감지
                const observer = new MutationObserver(function(mutations) {
                    try {
                        mutations.forEach(function(mutation) {
                            if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                                checkAndSetupAdditionalListeners();
                            }
                        });
                    } catch(e) {
                        console.error('MutationObserver 콜백 오류:', e);
                    }
                });
                
                // 모든 opt-wrap 요소 관찰
                const optWraps = document.querySelectorAll('.opt-wrap');
                if (optWraps && optWraps.length > 0) {
                    optWraps.forEach(function(wrap) {
                        try {
                            observer.observe(wrap, {
                                attributes: true,
                                attributeFilter: ['style']
                            });
                        } catch(e) {
                            console.error('observer.observe 오류:', e);
                        }
                    });
                }
            } catch(e) {
                console.error('MutationObserver 설정 오류:', e);
            }
        }
        
        // DOMContentLoaded 또는 이미 로드된 경우
        if (typeof document !== 'undefined') {
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    setTimeout(setupMutationObserver, 200);
                });
            } else {
                setTimeout(setupMutationObserver, 200);
            }
        }
        
        // 페이지 전환 버튼 클릭 시에도 확인
        document.addEventListener('click', function(e) {
            try {
                if (e.target && (e.target.id === 'quoteConversionBtn' || e.target.id === 'quotePrevBtn')) {
                    setTimeout(checkAndSetupAdditionalListeners, 500);
                }
            } catch(err) {
                console.error('클릭 이벤트 오류:', err);
            }
        });
    </script>

</body>

</html>
